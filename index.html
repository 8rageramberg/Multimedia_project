#index
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <title>DOMAIN SPECIFIC VIDEO RETRIEVAL FOR STRENGTH, HYPERTROPHY AND CONDITIONING</title>


</head>

<body>
  <div>
    <div class="container">
      <div class="card">
        <h1>What exercise am I doing?</h1>
        <p>Version 1.0.0</p>
        <img src='static/img.jpg' onclick="document.getElementById('input').click();" id="placeHolder">
        <form action="/start_algo" method="POST" onsubmit="startAlgo(event)">
          <label for="input"> Upload image</label>
          <input type="file" accept="image/jpg image/jpeg" id="input">
          <button type="submit">FIND MATCH</button>
        </form>
      </div>
    </div>

    <div class="container_2">
      <h1>Your exercise looks like:</h1>
      <div class="five_card">
        <div class="img_card">
          <img src="static/img.jpg" id="Image 1">
          <p type="score1">Description 1</p>
        </div>
        <div class="img_card">
          <img src="static/img.jpg" alt="Image 2">
          <p type="score1">Description 2</p>
        </div>
        <div class="img_card">
          <img src="static/img.jpg" alt="Image 3">
          <p type="score1">Description 3</p>
        </div>
        <div class="img_card">
          <img src="static/img.jpg" alt="Image 4">
          <p type="score1">Description 4</p>
        </div>
        <div class="img_card">
          <img src="static/img.jpg" alt="Image 5">
          <p type="score1">Description 5</p>
        </div>
      </div>
    </div>

    <div class="container_3">
      <h2>We think you are doing:</h2>
      <h1>THIS EXERCISE</h1>
      <img src="static/img.jpg" type="VIDEO" style=>
    </div>



</body>

<script>
  let placeHolder = document.getElementById("placeHolder")
  let inputImg = document.getElementById("input")

  inputImg.onchange = function () {
    let img = inputImg.files[0]
    placeHolder.src = URL.createObjectURL(img);

    let form = new FormData();
    form.append("uploaded_img", img, img.name);

    fetch('/save_image', {
      method: 'POST',
      body: form
    }).then(response => {
      if (response.ok) {
        console.log('Image uploaded successfully.');
      } else {
        console.error('Error uploading image.');
      }
    }).catch(error => {
      console.error('Error:', error);
    });
  };

  function startAlgo() {
    fetch('/start_algo', {
      method: 'POST',
    }).then(response => {
      if (!response.ok) {
        throw new Error('Error uploading image.');
      }
      return response.json();
    }).then(data => {
      updateImgs(data);
    }).catch(error => {
      console.error('Error:', error);
    });
  }

  function updateImgs(data) {
    let imgs = document.querySelectorAll('.img_card img'); // Select all img elements within .img_card

    imgs.forEach((img, index) => {
      if (data.paths[index]) {
        img.src = data.paths[index]; // Update src attribute with image path from response
      }
    });
  }
</script>

</html>